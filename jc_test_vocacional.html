<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Orientación Vocacional</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: url('jc-fondo.avif') no-repeat center top / cover;
            margin: 0;
            padding: 15px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #chat-container {
            width: 80%;
            max-width: 600px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            margin: 0 auto;
        }
        .message {
            margin-bottom: 15px;
        }
        .bot {
            color: #00005A;
            font-size: 22px;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 20px;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option-btn {
            padding: 15px 20px;
            height: auto;
            min-height: 55px;
            box-sizing: border-box;
            background-color: #001EB4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            display: flex;
            align-items: center;
            font-size: 16px;
            line-height: 1.4;
        }
        .option-btn:hover {
            background-color: #00188f;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
        }
        #restart-btn {
            display: block;
            margin: 40px auto 0;
            padding: 12px 24px;
            background-color: white;
            color: #001EB4;
            border: 1.5px solid #CCCCCC;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        #restart-btn:hover {
            background-color: #009340;
            color: white;
            border-color: #009340;
        }
        @media (max-width: 600px) {
            #chat-container {
                margin: 0 auto;
                padding: 15px;
            }
        }
        /* Add loader styles */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }

        .loader-logo {
            width: 180px;
            margin-bottom: 35px;
        }

        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #001EB4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loader-text {
            color: #00005A;
            font-size: 18px;
            font-weight: 500;
            margin-top: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Start Screen Styles */
        #chat-header {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0px;
            padding-bottom: 20px;
        }

        #chat-header img {
            vertical-align: middle;
            width: 180px;
        }

        #chat-header span {
            font-size: 24px;
            vertical-align: middle;
            color: #00005A;
        }

        @media (max-width: 600px) {
            #chat-header {
                flex-direction: column;
                align-items: center;
            }

            #chat-header img {
                margin-bottom: 10px;
            }
        }
        
        #start-screen {
            text-align: center;
            padding: 20px 0;
        }
        
        #start-screen img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 0;
        }
        
        #start-screen h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2rem;
            line-height: 1;
            font-weight: 700;
        }
        
        #start-screen p {
            color: #333;
            font-size: 20px;
            line-height: 1.2;
            margin: 0 25px 30px;
        }
        
        #start-button {
            background-color: #001EB4;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 0 auto;
            display: block;
            width: fit-content;
        }
        
        #start-button:hover {
            background-color: #00188f;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 600px) {
            #chat-header img {
                max-width: 200px;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Updated loader with logo and text -->
    <div id="loader">
        <img src="jovenes-conectados-logo.png" alt="Jóvenes Conectados" class="loader-logo">
        <div class="loader-spinner"></div>
        <div class="loader-text">Cargando test vocacional</div>
    </div>

    <div id="chat-container">
        <div id="chat-header">
            <img src="jovenes-conectados-logo.png" alt="Logo Jóvenes Conectados">
            <span>Test vocacional</span>
        </div>

        <div id="start-screen">
            <img src="imagen-alumna.avif" alt="Estudiante" style="width: 220px;">
            <h1>Impulsá tu talento,<br>construí tu futuro</h1>
            <p>Descubrí en qué sos bueno y qué te apasiona. Completá este test vocacional gratuito y recibí una recomendación de cursos de Coursera pensados especialmente para vos. ¡Es el primer paso para elegir mejor tu camino!</p>
            <button id="start-button">¡Empezar!</button>
        </div>
        
        <div id="test-content" class="hidden">
            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <div id="chat-box"></div>
            <div id="result"></div>
        </div>
    </div>

    <div style="margin: 30px 0 0; text-align: center; width: 100%; max-width: 600px;">
        <img src="auspiciantes.avif" alt="Auspiciantes" style="max-width: calc(100% - 50px); height: auto; display: block; margin: 0 25px;">
    </div>

    <style>
        #progress-bar-container {
            width: 100%;
            background-color: #f0f0f0; /* Lighter background for better contrast */
            margin-bottom: 20px;
            border-radius: 5px;
            overflow: hidden; /* Hide the rounded corners on the progress bar */
        }

        #progress-bar {
            height: 10px;
            background-color: #009340; /* Updated to the requested green color */
            width: 0; /* Initial width is 0 */
            border-radius: 5px;
            transition: width 0.3s ease; /* Smooth transition for the width */
        }
    </style>

    <script>
        // Using localStorage instead of cookies for better reliability
        function saveResult(result) {
            try {
                localStorage.setItem('testResult', result);
                return true;
            } catch (e) {
                console.error('Error saving to localStorage:', e);
                return false;
            }
        }

        function getSavedResult() {
            try {
                return localStorage.getItem('testResult');
            } catch (e) {
                console.error('Error reading from localStorage:', e);
                return null;
            }
        }

        function clearSavedResult() {
            try {
                localStorage.removeItem('testResult');
                return true;
            } catch (e) {
                console.error('Error clearing localStorage:', e);
                return false;
            }
        }

        const questions = [
            {
                q: "1. ¿Qué actividad te resulta más atractiva?",
                options: [
                    { text: "Crear contenido visual o escribir para redes", routes: ["Diseño de contenido", "Marketing en redes"] },
                    { text: "Resolver problemas con lógica o códigos", routes: ["Programación", "Desarrollo de software"] },
                    { text: "Pensar en nuevas ideas para negocios", routes: ["Emprendimiento", "Creatividad e innovación"] },
                    { text: "Ayudar a los demás o resolver consultas", routes: ["Servicio al cliente", "Ventas"] }
                ]
            },
            {
                q: "2. ¿Qué preferís aprender?",
                options: [
                    { text: "Herramientas como Excel, Word, PowerPoint", routes: ["Competencias digitales"] },
                    { text: "Cómo gestionar recursos y tareas", routes: ["Manejo de proyectos"] },
                    { text: "Cómo proteger la información en internet", routes: ["Ciberseguridad"] },
                    { text: "Cómo tomar decisiones con números", routes: ["Contabilidad", "Análisis de datos"] }
                ]
            },
            {
                q: "3. ¿Te gustaría trabajar más con...?",
                options: [
                    { text: "Gente, clientes o audiencias", routes: ["Servicio al cliente", "Marketing", "Ventas"] },
                    { text: "Computadoras y tecnología", routes: ["IA", "Software", "Ciberseguridad"] },
                    { text: "Ideas nuevas y creatividad", routes: ["Creatividad", "Diseño", "Emprendimiento"] },
                    { text: "Organización y procesos", routes: ["Transformación digital", "Proyectos", "Contabilidad"] }
                ]
            },
            {
                q: "4. Si tenés que hacer un proyecto escolar, ¿qué rol preferís?",
                options: [
                    { text: "Diseñar la presentación o editar el video", routes: ["Diseño de contenido"] },
                    { text: "Coordinar al equipo y definir tareas", routes: ["Manejo de proyectos"] },
                    { text: "Analizar datos o gráficos", routes: ["Análisis de datos", "Contabilidad"] },
                    { text: "Investigar o buscar soluciones técnicas", routes: ["IA", "Software", "Ciberseguridad"] }
                ]
            },
            {
                q: "5. ¿Cuál de estas frases se parece más a vos?",
                options: [
                    { text: "Tengo buena imaginación y muchas ideas", routes: ["Creatividad e innovación"] },
                    { text: "Soy práctico y resuelvo problemas técnicos", routes: ["Programación", "Análisis de datos"] },
                    { text: "Me gusta atender y entender a las personas", routes: ["Ventas", "Servicio al cliente"] },
                    { text: "Soy ordenado/a y me fijo en los detalles", routes: ["Contabilidad", "Proyectos"] }
                ]
            },
            {
                q: "6. ¿Qué tipo de contenido te interesa ver o crear?",
                options: [
                    { text: "Videos, memes, campañas", routes: ["Diseño de contenido", "Marketing"] },
                    { text: "Juegos, apps, herramientas", routes: ["Diseño de videojuegos", "Desarrollo de software"] },
                    { text: "Planes de negocios o estrategias", routes: ["Emprendimiento", "Transformación digital"] },
                    { text: "Cursos, hojas de cálculo, documentos", routes: ["Competencias digitales", "Ofimática"] }
                ]
            },
            {
                q: "7. ¿Qué te gustaría saber hacer en un futuro cercano?",
                options: [
                    { text: "Hacer crecer un emprendimiento", routes: ["Emprendimiento"] },
                    { text: "Crear un videojuego o una app", routes: ["Videojuegos", "Software"] },
                    { text: "Comunicar bien un producto o marca", routes: ["Marketing", "Ventas"] },
                    { text: "Usar tecnología para resolver tareas", routes: ["Ofimática", "Transformación digital"] }
                ]
            },
            {
                q: "8. ¿Cuál de estas áreas te llama más la atención?",
                options: [
                    { text: "Inteligencia Artificial o aprendizaje automático", routes: ["IA"] },
                    { text: "Finanzas personales o registro de gastos", routes: ["Contabilidad"] },
                    { text: "Herramientas para trabajar mejor en equipo", routes: ["Manejo de proyectos"] },
                    { text: "Redes sociales y campañas digitales", routes: ["Marketing en redes"] }
                ]
            },
            {
                q: "9. ¿Qué elegís si tenés 2 horas libres para aprender algo nuevo?",
                options: [
                    { text: "Tomar un curso creativo o de diseño", routes: ["Diseño de contenido"] },
                    { text: "Investigar sobre cómo funciona un sistema", routes: ["Software", "IA"] },
                    { text: "Aprender técnicas de ventas o atención al cliente", routes: ["Ventas", "Servicio al cliente"] },
                    { text: "Organizar información o datos", routes: ["Análisis de datos", "Competencias digitales"] }
                ]
            },
            {
                q: "10. ¿Qué frase te representa mejor?",
                options: [
                    { text: "Me gusta pensar en el futuro y cómo innovar", routes: ["Creatividad", "IA"] },
                    { text: "Prefiero entender cómo funcionan las cosas", routes: ["Programación", "Análisis de datos"] },
                    { text: "Me interesa cómo la tecnología cambia el trabajo", routes: ["Transformación digital"] },
                    { text: "Disfruto ayudar a otras personas con sus necesidades", routes: ["Servicio al cliente", "Ventas"] }
                ]
            },
            {
                q: "11. ¿Cuál de estas actividades elegirías en una feria de profesiones?",
                options: [
                    { text: "Hacer una app o juego", routes: ["Desarrollo de software", "Videojuegos"] },
                    { text: "Vender un producto con una estrategia", routes: ["Ventas", "Marketing"] },
                    { text: "Hacer una campaña visual", routes: ["Diseño de contenido"] },
                    { text: "Armar un plan para un nuevo negocio", routes: ["Emprendimiento"] }
                ]
            },
            {
                q: "12. ¿Cuál sería tu “súper poder” ideal?",
                options: [
                    { text: "Entender el lenguaje de las máquinas", routes: ["Programación", "IA"] },
                    { text: "Hacer que la gente diga “wow” con una presentación", routes: ["Creatividad", "Diseño de contenido"] },
                    { text: "Convencer a cualquiera de comprar algo", routes: ["Ventas", "Marketing"] },
                    { text: "Organizarlo todo para que funcione perfecto", routes: ["Proyectos", "Contabilidad"] }
                ]
            }
        ];

        let current = 0;
        const scores = {};
        const chatBox = document.getElementById('chat-box');
        const resultBox = document.getElementById('result');
        const progressBar = document.getElementById('progress-bar');

        function showQuestion() {
            chatBox.innerHTML = "";
            const q = questions[current];
            const div = document.createElement('div');
            div.className = 'message bot';
            div.textContent = q.q;
            chatBox.appendChild(div);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';
            
            q.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option.text;
                btn.onclick = () => {
                    option.routes.forEach(route => {
                        scores[route] = (scores[route] || 0) + 1;
                    });
                    current++;
                    updateProgressBar();
                    if (current < questions.length) {
                        showQuestion();
                    } else {
                        showResult();
                    }
                };
                optionsDiv.appendChild(btn);
            });

            chatBox.appendChild(optionsDiv);
        }

        function showResult() {
            // Hide the chat box
            chatBox.style.display = 'none';
            
            // Style the result container
            resultBox.style.fontSize = '30px';
            resultBox.style.textAlign = 'center';
            resultBox.style.padding = '20px';
            resultBox.style.color = '#00005A';
            
            // Calculate and show the result
            let sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            let [topRoute, topScore] = sorted[0];
            let secondary = sorted.length > 1 && sorted[1][1] >= topScore - 1 ? ` También podrías explorar: ${sorted[1][0]}.` : "";
            let resultText = `Tu ruta ideal es: ${topRoute}.${secondary}`;
            
            // Save result to localStorage
            saveResult(resultText);
            
            // Display result with restart button
            resultBox.innerHTML = `
                <div>${resultText}</div>
                <button id="restart-btn">Volver a tomar el test</button>
            `;

            // Add click handler for the restart button
            document.getElementById('restart-btn').addEventListener('click', restartTest);

            // Disable option buttons after showing the result
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('disabled');
            });
        }

        function restartTest() {
            // Clear the saved test result
            clearSavedResult();
            
            // Reset test state
            current = 0;
            for (let key in scores) {
                delete scores[key];
            }
            
            // Reset UI
            resultBox.textContent = '';
            resultBox.style = '';
            chatBox.style.display = '';
            progressBar.style.width = '0%';
            
            // Show first question
            showQuestion();
        }

        function updateProgressBar() {
            const progress = (current / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Check for existing test result on page load
        window.onload = function() {
            const savedResult = getSavedResult();
            if (savedResult) {
                // Hide chat box and show saved result
                chatBox.style.display = 'none';
                resultBox.style.fontSize = '30px';
                resultBox.style.textAlign = 'center';
                resultBox.style.padding = '20px';
                resultBox.style.color = '#00005A';
                resultBox.innerHTML = `
                    <div>${savedResult}</div>
                    <button id="restart-btn">Volver a tomar el test</button>
                `;
                document.getElementById('restart-btn').addEventListener('click', restartTest);
            } else {
                // No saved result, start the test
                showQuestion();
            }
        };

        // Initialize the start screen
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loader when everything is loaded
            setTimeout(function() {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.classList.add('fade-out');
                    // Remove loader from DOM after animation completes
                    setTimeout(() => {
                        loader.style.display = 'none';
                    }, 500);
                }
            }, 1000);
            
            // Add start button event listener
            const startButton = document.getElementById('start-button');
            if (startButton) {
                startButton.addEventListener('click', function() {
                    const startScreen = document.getElementById('start-screen');
                    const testContent = document.getElementById('test-content');
                    
                    if (startScreen && testContent) {
                        startScreen.classList.add('hidden');
                        testContent.classList.remove('hidden');
                        // Show first question after a short delay
                        setTimeout(showQuestion, 300);
                    }
                });
            }
        });
    </script>
    <style>
        .option-btn.disabled {
            background-color: #999; /* Grey out the button */
            cursor: not-allowed; /* Change the cursor to indicate it's disabled */
            opacity: 0.7; /* Reduce opacity for visual indication */
        }
    </style>
</body>
</html>
