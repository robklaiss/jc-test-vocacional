<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Orientación Vocacional</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('/jc-fondo.jpg');
            background-repeat: repeat;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        #chat-container {
            width: 100%;
            max-width: 600px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            margin: 0 15px;
        }
        .message {
            margin-bottom: 15px;
        }
        .bot {
            color: #00005A;
            font-size: 18px;
            font-weight: bold;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option-btn {
            padding: 10px 15px;
            background-color: #1976d2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
        }
        .option-btn:hover {
            background-color: #135ba1;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div id="chat-container">
        <style>
            #chat-header {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0px;
                padding-bottom: 20px;
            }

            #chat-header img {
                vertical-align: middle;
                width: 180px; /* Ensure logo doesn't overflow */
            }

            #chat-header span {
                font-size: 24px;
                vertical-align: middle;
                color: #00005A;
            }

                @media (max-width: 600px) {
                    #chat-header {
                        flex-direction: column;
                        align-items: center;
                    }

                    #chat-header img {
                        margin-bottom: 10px;
                    }
                }
            </style>

        <div id="chat-header">
            <img src="jovenes-conectados-logo.png" alt="Logo Jóvenes Conectados">
            <span>Test vocacional</span>
        </div>

        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>

        <div id="chat-box"></div>
        <div id="result"></div>
    </div>

    <style>
        #progress-bar-container {
            width: 100%;
            background-color: #ddd;
            margin-bottom: 20px;
            border-radius: 5px;
            overflow: hidden; /* Hide the rounded corners on the progress bar */
        }

        #progress-bar {
            height: 10px;
            background-color: #aaa;
            width: 0; /* Initial width is 0 */
            border-radius: 5px;
            transition: width 0.3s ease; /* Smooth transition for the width */
        }
    </style>

    <script>
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function deleteCookie(name) {
            document.cookie = name + '=; Max-Age=-99999999;';
        }

        const questions = [
            {
                q: "1. ¿Qué actividad te resulta más atractiva?",
                options: [
                    { text: "Crear contenido visual o escribir para redes", routes: ["Diseño de contenido", "Marketing en redes"] },
                    { text: "Resolver problemas con lógica o códigos", routes: ["Programación", "Desarrollo de software"] },
                    { text: "Pensar en nuevas ideas para negocios", routes: ["Emprendimiento", "Creatividad e innovación"] },
                    { text: "Ayudar a los demás o resolver consultas", routes: ["Servicio al cliente", "Ventas"] }
                ]
            },
            {
                q: "2. ¿Qué preferís aprender?",
                options: [
                    { text: "Herramientas como Excel, Word, PowerPoint", routes: ["Competencias digitales"] },
                    { text: "Cómo gestionar recursos y tareas", routes: ["Manejo de proyectos"] },
                    { text: "Cómo proteger la información en internet", routes: ["Ciberseguridad"] },
                    { text: "Cómo tomar decisiones con números", routes: ["Contabilidad", "Análisis de datos"] }
                ]
            },
            {
                q: "3. ¿Te gustaría trabajar más con...?",
                options: [
                    { text: "Gente, clientes o audiencias", routes: ["Servicio al cliente", "Marketing", "Ventas"] },
                    { text: "Computadoras y tecnología", routes: ["IA", "Software", "Ciberseguridad"] },
                    { text: "Ideas nuevas y creatividad", routes: ["Creatividad", "Diseño", "Emprendimiento"] },
                    { text: "Organización y procesos", routes: ["Transformación digital", "Proyectos", "Contabilidad"] }
                ]
            },
            {
                q: "4. Si tenés que hacer un proyecto escolar, ¿qué rol preferís?",
                options: [
                    { text: "Diseñar la presentación o editar el video", routes: ["Diseño de contenido"] },
                    { text: "Coordinar al equipo y definir tareas", routes: ["Manejo de proyectos"] },
                    { text: "Analizar datos o gráficos", routes: ["Análisis de datos", "Contabilidad"] },
                    { text: "Investigar o buscar soluciones técnicas", routes: ["IA", "Software", "Ciberseguridad"] }
                ]
            },
            {
                q: "5. ¿Cuál de estas frases se parece más a vos?",
                options: [
                    { text: "Tengo buena imaginación y muchas ideas", routes: ["Creatividad e innovación"] },
                    { text: "Soy práctico y resuelvo problemas técnicos", routes: ["Programación", "Ciberseguridad"] },
                    { text: "Me gusta atender y entender a las personas", routes: ["Ventas", "Servicio al cliente"] },
                    { text: "Soy ordenado/a y me fijo en los detalles", routes: ["Contabilidad", "Proyectos"] }
                ]
            },
            {
                q: "6. ¿Qué tipo de contenido te interesa ver o crear?",
                options: [
                    { text: "Videos, memes, campañas", routes: ["Diseño de contenido", "Marketing"] },
                    { text: "Juegos, apps, herramientas", routes: ["Diseño de videojuegos", "Desarrollo de software"] },
                    { text: "Planes de negocios o estrategias", routes: ["Emprendimiento", "Transformación digital"] },
                    { text: "Cursos, hojas de cálculo, documentos", routes: ["Competencias digitales", "Ofimática"] }
                ]
            },
            {
                q: "7. ¿Qué te gustaría saber hacer en un futuro cercano?",
                options: [
                    { text: "Hacer crecer un emprendimiento", routes: ["Emprendimiento"] },
                    { text: "Crear un videojuego o una app", routes: ["Videojuegos", "Software"] },
                    { text: "Comunicar bien un producto o marca", routes: ["Marketing", "Ventas"] },
                    { text: "Usar tecnología para resolver tareas", routes: ["Ofimática", "Transformación digital"] }
                ]
            },
            {
                q: "8. ¿Cuál de estas áreas te llama más la atención?",
                options: [
                    { text: "Inteligencia Artificial o aprendizaje automático", routes: ["IA"] },
                    { text: "Finanzas personales o registro de gastos", routes: ["Contabilidad"] },
                    { text: "Herramientas para trabajar mejor en equipo", routes: ["Manejo de proyectos"] },
                    { text: "Redes sociales y campañas digitales", routes: ["Marketing en redes"] }
                ]
            },
            {
                q: "9. ¿Qué elegís si tenés 2 horas libres para aprender algo nuevo?",
                options: [
                    { text: "Tomar un curso creativo o de diseño", routes: ["Diseño de contenido"] },
                    { text: "Investigar sobre cómo funciona un sistema", routes: ["Software", "IA"] },
                    { text: "Aprender técnicas de ventas o atención al cliente", routes: ["Ventas", "Servicio al cliente"] },
                    { text: "Organizar información o datos", routes: ["Análisis de datos", "Competencias digitales"] }
                ]
            },
            {
                q: "10. ¿Qué frase te representa mejor?",
                options: [
                    { text: "Me gusta pensar en el futuro y cómo innovar", routes: ["Creatividad", "IA"] },
                    { text: "Prefiero entender cómo funcionan las cosas", routes: ["Programación", "Análisis de datos"] },
                    { text: "Me interesa cómo la tecnología cambia el trabajo", routes: ["Transformación digital"] },
                    { text: "Disfruto ayudar a otras personas con sus necesidades", routes: ["Servicio al cliente", "Ventas"] }
                ]
            },
            {
                q: "11. ¿Cuál de estas actividades elegirías en una feria de profesiones?",
                options: [
                    { text: "Hacer una app o juego", routes: ["Desarrollo de software", "Videojuegos"] },
                    { text: "Vender un producto con una estrategia", routes: ["Ventas", "Marketing"] },
                    { text: "Hacer una campaña visual", routes: ["Diseño de contenido"] },
                    { text: "Armar un plan para un nuevo negocio", routes: ["Emprendimiento"] }
                ]
            },
            {
                q: "12. ¿Cuál sería tu “súper poder” ideal?",
                options: [
                    { text: "Entender el lenguaje de las máquinas", routes: ["Programación", "IA"] },
                    { text: "Hacer que la gente diga “wow” con una presentación", routes: ["Creatividad", "Diseño de contenido"] },
                    { text: "Convencer a cualquiera de comprar algo", routes: ["Ventas", "Marketing"] },
                    { text: "Organizarlo todo para que funcione perfecto", routes: ["Proyectos", "Contabilidad"] }
                ]
            }
        ];

        let current = 0;
        const scores = {};
        const chatBox = document.getElementById('chat-box');
        const resultBox = document.getElementById('result');
        const progressBar = document.getElementById('progress-bar');

        function showQuestion() {
            chatBox.innerHTML = "";
            const q = questions[current];
            const div = document.createElement('div');
            div.className = 'message bot';
            div.textContent = q.q;
            chatBox.appendChild(div);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';

            q.options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option.text;
                btn.onclick = () => {
                    option.routes.forEach(route => {
                        scores[route] = (scores[route] || 0) + 1;
                    });
                    current++;
                    updateProgressBar(); // Update the progress bar
                    if (current < questions.length) {
                        showQuestion();
                    } else {
                        showResult();
                    }
                };
                optionsDiv.appendChild(btn);

                // Add event listener
                /* btn.addEventListener('click', () => {
                    option.routes.forEach(route => {
                        scores[route] = (scores[route] || 0) + 1;
                    });
                    current++;
                    updateProgressBar(); // Update the progress bar
                    if (current < questions.length) {
                        showQuestion();
                    } else {
                        showResult();
                    }
                }); */
            });

            chatBox.appendChild(optionsDiv);
        }

        function showResult() {
            let sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            let [topRoute, topScore] = sorted[0];
            let secondary = sorted.length > 1 && sorted[1][1] >= topScore - 1 ? ` También podrías explorar: ${sorted[1][0]}.` : "";
            resultBox.textContent = `Tu ruta ideal es: ${topRoute}.${secondary}`;

            // Disable option buttons after showing the result
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('disabled'); // Add a class for styling
            });
        }

        function updateProgressBar() {
            const progress = (current / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        showQuestion();
    </script>
    <style>
        .option-btn.disabled {
            background-color: #999; /* Grey out the button */
            cursor: not-allowed; /* Change the cursor to indicate it's disabled */
            opacity: 0.7; /* Reduce opacity for visual indication */
        }
    </style>
</body>
</html>
